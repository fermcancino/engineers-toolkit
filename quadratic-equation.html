<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Quadratic Equation Solver</title>
  <style>
    * {
      box-sizing: border-box;
      font-family: 'Segoe UI', sans-serif;
    }
    body {
      margin: 0;
      background: #121212;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 10px;
      transition: background-color 0.3s, color 0.3s;
    }
    .calculator {
      background: linear-gradient(to bottom, #1a1a1a, #222);
      border-radius: 20px;
      padding: 20px;
      max-width: 400px;
      width: 100%;
      position: relative;
      border: 2px solid rgba(0, 255, 255, 0.5);
      box-shadow:
        0 0 20px rgba(0, 255, 255, 0.3),
        0 0 40px rgba(0, 255, 255, 0.2),
        0 0 60px rgba(0, 255, 255, 0.15);
      transition: box-shadow 0.3s, background-color 0.3s;
      animation: glowPulse 3s ease-in-out infinite;
    }
    
    .top-bar {
      display: flex;
      justify-content: space-around;
      align-items: center;
      margin-top: 0.7rem;
      margin-bottom: 1rem;
    }
    .title { 
      font-size: 1.2rem; 
      font-weight: bold; 
    }
    /* Theme Toggle */
    .switch {
      width: 50px;
      height: 28px;
      background-color: #555;
      box-shadow: 0 2px 6px rgba(255,255,255,0.15);
      border-radius: 30px;
      position: relative;
      transition: background-color 0.3s ease;
      display: flex;
      align-items: center;
      padding: 2px;
      cursor: pointer;
    }

    .slider {
      width: 24px;
      height: 24px;
      background: white;
      border-radius: 50%;
      transition: all 0.3s ease;
      transform: translateX(0);
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
    }

    body.light .switch {
      background: #f0f0f0;
      border: 1px solid #bbb;
      box-shadow: 0 2px 5px rgba(0,0,0,0.15);
    }

    body.light .switch .slider {
      transform: translateX(20px);
    }

    .equation-preview {
     text-align: center;
     font-size: 1.1rem;
     margin-bottom: 20px;
     font-weight: 500;
     color: #00eaff;
    }
    body.light .equation-preview {
     color: #003973;
    }

    .inputs {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      margin-bottom: 1rem;
    }
    input {
      padding: 10px;
      font-size: 1.1rem;
      text-align: center;
      border-radius: 8px;
      border: none;
      width: 100%;
      background: #333;
      color: white;
      transition: 0.3s;
    }
    .inputs input:focus { 
      outline: none !important; 
      background: #333;
      box-shadow: 0 0 5px #00bcd4;
    }
    input.error {
      outline: none;
      border: 2px solid #ff8080;
      box-shadow: 0 0 6px #ff8080;
      animation: shake 0.3s;
    }

    .result-container {
      background: #2a2a2a;
      border-radius: 10px;
      text-align: center;
      padding: 10px;
      margin-bottom: 1rem;
      min-height: 48px;
    }

    .keypad {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
    }
    .keypad button {
      padding: 15px;
      font-size: 1.1rem;
      border-radius: 10px;
      border: none;
      background: #2c2c2c;
      color: white;
      box-shadow: inset -2px -2px 4px rgba(255,255,255,0.1),
                  inset 2px 2px 4px rgba(0,0,0,0.5);
      cursor: pointer;
    }
    .keypad button:hover {
      transform: scale(1.05);
      animation: bounce 0.3s ease;
    }
    .keypad button:active {
      box-shadow: inset 2px 2px 4px #121220, inset -2px -2px 4px #3a3a50;
      transform: scale(0.97);
    }
    @keyframes bounce {
     0%, 100% { transform: scale(1); }
     50% { transform: scale(1.12); }
    }
    
    .wide { 
      grid-column: span 3; 
    }
    
    .keypad .solve:active {
      box-shadow: 0 0 12px rgba(100, 255, 100, 0.8), inset 0 0 6px rgba(0,0,0,0.5);
      animation: bounce 0.3s ease;
    }

    .shake { animation: shake 0.3s; }
    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      50% { transform: translateX(5px); }
      75% { transform: translateX(-5px); }
      100% { transform: translateX(0); }
    }
    
    @keyframes glowPulse {
      0% {
    box-shadow:
      0 0 20px rgba(0, 255, 255, 0.3),
      0 0 40px rgba(0, 255, 255, 0.2),
      0 0 60px rgba(0, 255, 255, 0.15);
     }
      50% {
    box-shadow:
      0 0 25px rgba(0, 255, 255, 0.5),
      0 0 50px rgba(0, 255, 255, 0.3),
      0 0 70px rgba(0, 255, 255, 0.2);
     }
      100% {
    box-shadow:
      0 0 20px rgba(0, 255, 255, 0.3),
      0 0 40px rgba(0, 255, 255, 0.2),
      0 0 60px rgba(0, 255, 255, 0.15);
     }
    }

    body.light {
      background: #f4f4f4;
      color: #111;
    }
    body.light .calculator {
      background: linear-gradient(to bottom, #fff, #ddd);
      color: #111;
    }
    body.light input { 
      background: #e0e0e0; 
      color: #111; 
    }
    body.light input:focus { 
      background: #f0f0f0; 
    }
    
    body.light .result-container { background: #fff; 
      color: #000; 
    }
    body.light .keypad button { 
      background: #ccc; 
      color: #111; 
    }
  </style>
</head>
<body>
  <div class="calculator">
    <div class="top-bar">
      <div class="title">Quadratic Equation Solver</div>
      <div id="themeToggle" class="switch">
      <div class="slider"></div>
     </div>
    </div>
    
    <div class="equation-preview" id="eqFormat">Equation: ax² + bx + c = 0</div>
    
    <div class="inputs">
      <input id="a" placeholder="a(x²)" />
      <input id="b" placeholder="b(x)" />
      <input id="c" placeholder="c" />
    </div>

    <div class="result-container" id="result">x₁ = ?<br>x₂ = ?</div>

    <div class="keypad">
      <button onclick="clearAll()">C</button>
      <button onclick="toggleSign()">±</button>
      <button onclick="backspace()">⌫</button>

      <button onclick="append('7')">7</button>
      <button onclick="append('8')">8</button>
      <button onclick="append('9')">9</button>

      <button onclick="append('4')">4</button>
      <button onclick="append('5')">5</button>
      <button onclick="append('6')">6</button>

      <button onclick="append('1')">1</button>
      <button onclick="append('2')">2</button>
      <button onclick="append('3')">3</button>

      <button onclick="append('.')">.</button>
      <button onclick="append('0')">0</button>
      <button onclick="switchInput()">→</button>

      <button class="solve wide" onclick="solve()">Solve Equation</button>
    </div>
  </div>

  <script>
  const inputs = [document.getElementById('a'), document.getElementById('b'), document.getElementById('c')];
  const result = document.getElementById('result');
  let active = 0;

  function focusActive() {
    inputs.forEach((el, i) => {
      el.style.outline = i === active ? '2px solid #4facfe' : 'none';
    });
    inputs[active].focus();
  }

  function append(char) {
    const input = inputs[active];
    if (!input) return;

    const start = input.selectionStart;
    const end = input.selectionEnd;
    const value = input.value;

    if (char === '.' && value.includes('.')) return;

    input.value = value.slice(0, start) + char + value.slice(end);
    input.setSelectionRange(start + 1, start + 1);
    input.focus();
  }

  function backspace() {
    const input = inputs[active];
    const start = input.selectionStart;
    const end = input.selectionEnd;

    if (start !== end) {
      input.value = input.value.slice(0, start) + input.value.slice(end);
      input.setSelectionRange(start, start);
    } else if (start > 0) {
      input.value = input.value.slice(0, start - 1) + input.value.slice(start);
      input.setSelectionRange(start - 1, start - 1);
    }
    input.focus();
  }

  function toggleSign() {
    const input = inputs[active];
    if (!input) return;
    input.value = input.value.startsWith('-') ? input.value.slice(1) : '-' + input.value;
    input.focus();
  }

  function switchInput() {
    active = (active + 1) % 3;
    focusActive();
  }

  function clearAll() {
    inputs.forEach(i => {
      i.value = '';
      i.classList.remove('error');
    });
    result.innerHTML = 'x₁ = ?<br>x₂ = ?';
    active = 0;
    focusActive();
  }

  function showError(msg) {
  result.innerHTML = `<span style="color:#ff8080">${msg}</span>`;

  const inputsContainer = document.querySelector('.inputs');
  inputsContainer.classList.add('error');
  result.classList.add('shake');

  // Remove shake effect after animation
  setTimeout(() => {
    result.classList.remove('shake');
    inputsContainer.classList.remove('error');
  }, 400);
}

  function solve() {
  const a = parseFloat(document.getElementById('a').value);
  const b = parseFloat(document.getElementById('b').value);
  const c = parseFloat(document.getElementById('c').value);
  const result = document.getElementById('result');

  if (isNaN(a) || isNaN(b) || isNaN(c)) {
  result.innerHTML = "<span style='color: #ff8080;'>Please enter valid numbers for a, b, and c.</span>";

  let hasError = false;
  inputs.forEach(i => {
    const val = i.value.trim();
    const isInvalid = val === '' || isNaN(parseFloat(val));
    if (isInvalid) {
      i.classList.add('error');
      hasError = true;
    }
  });

  if (hasError) {
    const inputsContainer = document.querySelector('.inputs');
    inputsContainer.classList.add('shake');

    setTimeout(() => {
      inputsContainer.classList.remove('shake');
      inputs.forEach(i => i.classList.remove('error'));
    }, 600);
  }

  return;
}

  if (a === 0) {
    result.innerHTML = "<span style='color: #ff8080;'>This is not a quadratic equation (a ≠ 0).</span>";
    return;
  }

  const discriminant = b * b - 4 * a * c;
  const denominator = 2 * a;
  let solution = `<strong>Discriminant (D):</strong> ${discriminant}<br>`;

  // Function to simplify square root if possible (basic)
  function isPerfectSquare(n) {
    return Number.isInteger(Math.sqrt(n));
  }

  if (discriminant > 0) {
    const sqrtD = Math.sqrt(discriminant);
    const root1 = (-b + sqrtD) / denominator;
    const root2 = (-b - sqrtD) / denominator;

    solution += `<strong>Roots:</strong> Two real and distinct roots<br>`;
    solution += `x₁ = ${root1.toFixed(4)}<br>x₂ = ${root2.toFixed(4)}<br>`;

    if (!isPerfectSquare(discriminant)) {
      solution += `<strong>Exact Form:</strong><br>`;
      solution += `x₁ = (-${b} + √${discriminant}) / (${2 * a})<br>`;
      solution += `x₂ = (-${b} - √${discriminant}) / (${2 * a})<br>`;
    }
  } else if (discriminant === 0) {
    const root = -b / denominator;
    solution += `<strong>Root:</strong> One real root (repeated)<br>x = ${root.toFixed(4)}<br>`;
    solution += `<strong>Exact Form:</strong> x = -${b} / (${2 * a})<br>`;
  } else {
    const realPart = (-b / denominator).toFixed(4);
    const imaginaryPart = (Math.sqrt(-discriminant) / denominator).toFixed(4);
    solution += `<strong>Roots:</strong> Two complex roots<br>`;
    solution += `x₁ = ${realPart} + ${imaginaryPart}i<br>`;
    solution += `x₂ = ${realPart} - ${imaginaryPart}i<br>`;
    solution += `<strong>Exact Form:</strong><br>`;
    solution += `x₁ = (-${b} + √${discriminant}) / (${2 * a})<br>`;
    solution += `x₂ = (-${b} - √${discriminant}) / (${2 * a})<br>`;
  }

  // ✅ Vertex
  const xv = -b / (2 * a);
  const yv = a * xv * xv + b * xv + c;

  // ✅ Axis of symmetry
  const axisSymmetry = `x = ${xv.toFixed(4)}`;

  // ✅ Direction
  const direction = a > 0 ? "Upward (Minimum point)" : "Downward (Maximum point)";

  solution += `<hr>`;
  solution += `<strong>Vertex:</strong> (${xv.toFixed(4)}, ${yv.toFixed(4)})<br>`;
  solution += `<strong>Axis of Symmetry:</strong> ${axisSymmetry}<br>`;
  solution += `<strong>Direction of Parabola:</strong> ${direction}`;

  result.innerHTML = solution;
}

    // Theme toggle 
      themeToggle.addEventListener("click", () => {
      document.body.classList.toggle("light");
    });

    document.addEventListener("keydown", (e) => { 
    const key = e.key;

    // Digits 0–9
    if (/^[0-9]$/.test(key)) {
        append(key);
        e.preventDefault();
        return;
    }

    // Decimal point
    if (key === ".") {
        append(".");
        e.preventDefault();
        return;
    }

    // Backspace
    if (key === "Backspace") {
        backspace();
        e.preventDefault();
        return;
    }

    // Plus/minus sign toggle (press `-`)
    if (key === "-") {
        toggleSign();
        e.preventDefault();
        return;
    }

    // 🔹 Move ONLY with ArrowLeft & ArrowRight
    if (key === "ArrowRight") {
        nextInput();
        e.preventDefault();
        return;
    }
    if (key === "ArrowLeft") {
        prevInput();
        e.preventDefault();
        return;
    }

    // Solve with Enter
    if (key === "Enter") {
        solve();
        e.preventDefault();
        return;
    }

    // Clear with Escape
    if (key === "Escape") {
        clearAll();
        e.preventDefault();
        return;
    }
});

// 🔹 Navigation helpers
function nextInput() {
  active = (active + 1) % inputs.length; 
  focusActive();
}

function prevInput() {
  active = (active - 1 + inputs.length) % inputs.length; 
  focusActive();
}

  window.onload = () => {
    const isMobile = /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);

    if (isMobile) {
      // Allow typing, but prevent auto-popup of mobile keyboard by default
      inputs.forEach(input => input.setAttribute('inputmode', 'none'));
    }

    inputs.forEach((input, index) => {
      input.addEventListener('click', () => {
        active = index;
        focusActive();
      });
    });

    focusActive();
  };
</script>
</body>
</html>